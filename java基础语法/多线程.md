# 基本概念：程序、进程、线程

## 程序

**程序(program)**是为完成特定任务、用某种语言编写的一组指令的集合。

即指一段静态的代码，静态对象。

## 进程

**进程(process)**是程序的一次执行过程，或是正在运行的一个程序。

进程是一个动态的过程：有它自身的产生、存在和消亡的过程。（即生命周期）

![image-20210723161854818](images/image-20210723161854818.png)

## 线程

进程可进一步细化为**线程（thread）**，是**一个程序内部的一条执行路径**。

<img src="images/image-20210723163156537.png" alt="image-20210723163156537" style="zoom:33%;" />

- 若一个进程同一时间**并行**执行多个线程，就是支持多线程的

- **线程作为调度和执行的单位，每个线程拥有独立的运行栈和程序计数器(pc)**，线程切换的开销小 

- 一个进程中的多个线程共享相同的内存单元/内存地址空间它们从同一堆中分配对象，可以访问相同的变量和对象。这就使得线程间通信更简便、高效。但多个线程操作共享的系统资源可能就会带来安全的隐患。

## 单核与多核CPU的理解

![image-20210723165006486](images/image-20210723165006486.png)



## 并行与并发

- 并行：多个CPU同时执行多个任务。比如：多个人同时做不同的事。  
- 并发：一个CPU(采用时间片)同时执行多个任务。比如：秒杀、多个人做同一件事。

## 使用多线程的优点

以单核CPU为例，只使用单个线程先后完成多个任务（调用多个方法），肯定比用多个线程来完成用的时间更短，为何仍需多线程呢？

![image-20210723170455249](images/image-20210723170455249.png)

- 何时使用多线程：

![image-20210723170659210](images/image-20210723170659210.png)

# 线程的创建和使用

## 方式一：继承Thread类

### 步骤

1. 定义子类继承Thread类。

2. 子类中重写Thread类中的run方法。

3. 创建Thread子类对象，即创建了线程对象。

4. 调用线程对象start方法：1)启动线程；2)调用run方法

举例如下：
```java
/*文件名：ThreadTest.java*/

//1.定义子类继承Thread类
class MyThread extends Thread{
    
    //2.子类重写Thread中的run方法
    @Override
    public void run(){
        //....
        //将此线程要执行的操作声明在run()中
    }
}

public class ThreadTest{
    public static void main(String[] args){
        //3.创建子类对象
        MyThread t1 = new MyThread();
        //4.调用子类start()方法
        t1.start();
        
        //main方法中的其他操作仍然还在主线程中进行
        System.out.println("some other operation...");
        
    }
   
}
```

### 注意点

![image-20210724111700788](images/image-20210724111700788.png)

### Thread类的常用方法

|                 方法名                 | 说明                                                         |
| :------------------------------------: | :----------------------------------------------------------- |
|           public void run()            | 通常需要重写此方法，将创建的线程要执行的操作声明在此方法中   |
|          public void start()           | 启动当前线程；调用当前线程的run()方法                        |
| public final void setName(String name) | 设置当前线程的名字                                           |
|               getName()                | 获取当前线程的名字                                           |
|                 join()                 | 当某个程序执行流中调用其他线程的 join() 方法时，调用线程将被阻塞，直到 join() 方法加入的 join 线程执行完为止。 |
|        final boolean isAlive()         | 判断当前线程是否存活                                         |
|                                        |                                                              |
|                                        |                                                              |
|              **静态方法**              | **说明**                                                     |
|          static void yield()           | 暂停当前正在执行的线程对象，并执行其他线程。                 |
|     static Thread currentThread()      | 返回对当前正在执行的线程对象的引用。                         |
|      static sleep(long millitime)      | 在指定的毫秒数内让当前正在执行的线程休眠（暂停执行），此操作受到系统计时器和调度程序精度和准确性的影响。 |
|                                        |                                                              |
|                                        |                                                              |
|                                        |                                                              |

